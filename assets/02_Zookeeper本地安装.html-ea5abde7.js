import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as e,c as n,a as s}from"./app-9a860c23.js";const i={},l=s(`<h2 id="本地模式安装" tabindex="-1"><a class="header-anchor" href="#本地模式安装" aria-hidden="true">#</a> 本地模式安装</h2><ol><li>安装前准备</li></ol><ul><li>安装 JDK</li><li>拷贝 apache-zookeeper-3.5.7-bin.tar.gz 安装包到 Linux 系统下</li><li>解压到指定目录</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>atguigu@hadoop102 software<span class="token punctuation">]</span>$ <span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> apache-zookeeper-3.5.7- bin.tar.gz <span class="token parameter variable">-C</span> /opt/module/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>修改名称</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>atguigu@hadoop102 module<span class="token punctuation">]</span>$ <span class="token function">mv</span> apache-zookeeper-3.5.7 -bin/zookeeper-3.5.7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>配置修改</li></ol><ul><li>将/opt/module/zookeeper-3.5.7/conf 这个路径下的 zoo_sample.cfg 修改为 zoo.cfg；</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>atguigu@hadoop102 conf<span class="token punctuation">]</span>$ <span class="token function">mv</span> zoo_sample.cfg zoo.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>打开zoo.cfg 文件，修改 dataDir 路径：</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>atguigu@hadoop102 zookeeper-3.5.7<span class="token punctuation">]</span>$ <span class="token function">vim</span> zoo.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>修改如下内容：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">dataDir</span><span class="token operator">=</span>/opt/module/zookeeper-3.5.7/zkData
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>在/opt/module/zookeeper-3.5.7/这个目录上创建 zkData 文件夹</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>atguigu@hadoop102 zookeeper-3.5.7<span class="token punctuation">]</span>$ <span class="token function">mkdir</span> zkData
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>操作Zookeeper</li></ol><ul><li>启动Zookeeper</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>atguigu@hadoop102 zookeeper-3.5.7<span class="token punctuation">]</span>$ bin/zkServer.sh start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>查看进程是否启动</li><li></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>atguigu@hadoop102 zookeeper-3.5.7<span class="token punctuation">]</span>$ jps <span class="token number">4020</span> Jps
<span class="token number">4001</span> QuorumPeerMain
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看状态</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>atguigu@hadoop102 zookeeper-3.5.7<span class="token punctuation">]</span>$ bin/zkServer.sh status ZooKeeper JMX enabled by default
Using config: /opt/module/zookeeper-3.5.7/bin/<span class="token punctuation">..</span>/conf/zoo.cfg Mode: standalone
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>启动客户端</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>atguigu@hadoop102 zookeeper-3.5.7<span class="token punctuation">]</span>$ bin/zkCli.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>退出客户端：</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">]</span> quit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>停止Zookeeper</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>atguigu@hadoop102 zookeeper-3.5.7<span class="token punctuation">]</span>$ bin/zkServer.sh stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="配置参数解读" tabindex="-1"><a class="header-anchor" href="#配置参数解读" aria-hidden="true">#</a> 配置参数解读</h2><p>Zookeeper中的配置文件zoo.cfg中参数含义解读如下：</p><ul><li>tickTime = 2000：通信心跳时间，Zookeeper服务器与客户端心跳时间，单位毫秒</li></ul><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231119160515.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>initLimit = 10：LF初始通信时限</li></ul><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231119160622.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Leader和Follower初始连接时能容忍的最多心跳数（tickTime的数量）</p><ul><li>syncLimit = 5：LF同步通信时限</li></ul><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231119160622.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Leader和Follower之间通信时间如果超过syncLimit * tickTime，Leader认为Follwer死掉，从服务器列表中删除Follwer。</p><ul><li>dataDir：保存Zookeeper中的数据</li></ul><p>注意：默认的tmp目录，容易被Linux系统定期删除，所以一般不用默认的tmp目录。</p><ul><li>clientPort = 2181：客户端连接端口，通常不做修改。</li></ul>`,41),o=[l];function t(u,p){return e(),n("div",null,o)}const r=a(i,[["render",t],["__file","02_Zookeeper本地安装.html.vue"]]);export{r as default};
