<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.66" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://lhplanet.github.io/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html"><meta property="og:site_name" content="é›¶å·æ˜Ÿçƒå›¾ä¹¦é¦†"><meta property="og:title" content="10_Dockerå®‰è£…Redis"><meta property="og:description" content="Dockerå®‰è£…Redis ä»¥ Redis 6.0.8 ä¸ºä¾‹ï¼š å•æœºç‰ˆå®‰è£… ç®€å•ç‰ˆ Redis ç®€å•çš„å¯åŠ¨Rediså®¹å™¨ï¼š ç®€å•ç‰ˆæ²¡æœ‰é…ç½®å®¹å™¨å·æ˜ å°„ï¼Œå½“å®¹å™¨è¢«åˆ é™¤æ—¶æ•°æ®æ— æ³•æ¢å¤ã€‚ å®é™…åº”ç”¨ç‰ˆRedis é…ç½®æ–‡ä»¶ã€æ•°æ®æ–‡ä»¶éƒ½å’Œå®¹å™¨å·è¿›è¡Œæ˜ å°„ã€‚ æ­¥éª¤ï¼š 1. å®¿ä¸»æœºåˆ›å»ºç›®å½•/app/redis 2. åœ¨/app/redisä¸‹åˆ›å»ºæ–‡ä»¶redis.confï¼Œä¸»..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-11-19T16:09:53.000Z"><meta property="article:author" content="LHP"><meta property="article:published_time" content="2023-10-24T08:56:06.000Z"><meta property="article:modified_time" content="2023-11-19T16:09:53.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"10_Dockerå®‰è£…Redis","image":[""],"datePublished":"2023-10-24T08:56:06.000Z","dateModified":"2023-11-19T16:09:53.000Z","author":[{"@type":"Person","name":"LHP","url":"http://152.136.173.53:8090/"}]}</script><link rel="icon" href="/favicon.ico"><title>10_Dockerå®‰è£…Redis | é›¶å·æ˜Ÿçƒå›¾ä¹¦é¦†</title><meta name="description" content="Dockerå®‰è£…Redis ä»¥ Redis 6.0.8 ä¸ºä¾‹ï¼š å•æœºç‰ˆå®‰è£… ç®€å•ç‰ˆ Redis ç®€å•çš„å¯åŠ¨Rediså®¹å™¨ï¼š ç®€å•ç‰ˆæ²¡æœ‰é…ç½®å®¹å™¨å·æ˜ å°„ï¼Œå½“å®¹å™¨è¢«åˆ é™¤æ—¶æ•°æ®æ— æ³•æ¢å¤ã€‚ å®é™…åº”ç”¨ç‰ˆRedis é…ç½®æ–‡ä»¶ã€æ•°æ®æ–‡ä»¶éƒ½å’Œå®¹å™¨å·è¿›è¡Œæ˜ å°„ã€‚ æ­¥éª¤ï¼š 1. å®¿ä¸»æœºåˆ›å»ºç›®å½•/app/redis 2. åœ¨/app/redisä¸‹åˆ›å»ºæ–‡ä»¶redis.confï¼Œä¸»...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-554b41dc.css" as="style"><link rel="stylesheet" href="/assets/style-554b41dc.css">
    <link rel="modulepreload" href="/assets/app-9a860c23.js"><link rel="modulepreload" href="/assets/10_Dockerå®‰è£…Redis.html-759d447a.js"><link rel="modulepreload" href="/assets/10_Dockerå®‰è£…Redis.html-3147f653.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="prefetch" href="/assets/index.html-b038d32e.js" as="script"><link rel="prefetch" href="/assets/01_Gitæ¦‚è¿°.html-dd3fa061.js" as="script"><link rel="prefetch" href="/assets/02_Gitå®‰è£….html-1106cdb5.js" as="script"><link rel="prefetch" href="/assets/03_Gitå¸¸ç”¨å‘½ä»¤.html-0e3675ae.js" as="script"><link rel="prefetch" href="/assets/04_Gitåˆ†æ”¯æ“ä½œ.html-68ecd110.js" as="script"><link rel="prefetch" href="/assets/05_Gitå›¢é˜Ÿåä½œæœºåˆ¶.html-34210b04.js" as="script"><link rel="prefetch" href="/assets/06_GitHubæ“ä½œ.html-014cf220.js" as="script"><link rel="prefetch" href="/assets/07_IDEAé›†æˆGit.html-62954152.js" as="script"><link rel="prefetch" href="/assets/08_IDEAé›†æˆGitHub.html-ea6fddcc.js" as="script"><link rel="prefetch" href="/assets/00_ç®€ä»‹.html-25c225a8.js" as="script"><link rel="prefetch" href="/assets/00_ç®€ä»‹.html-51b2e133.js" as="script"><link rel="prefetch" href="/assets/01_å¢åˆ æ”¹ï¼ˆStatementç‰ˆï¼‰.html-3a9c6a28.js" as="script"><link rel="prefetch" href="/assets/02_æŸ¥è¯¢ï¼ˆStatementç‰ˆï¼‰.html-5d28c1c4.js" as="script"><link rel="prefetch" href="/assets/03_é…ç½®propertiesæ–‡ä»¶ä¿¡æ¯.html-96b195c6.js" as="script"><link rel="prefetch" href="/assets/04_å®æˆ˜ä¸SQLæ³¨å…¥.html-109abc88.js" as="script"><link rel="prefetch" href="/assets/05_æŸ¥è¯¢ï¼ˆPreparedStatementç‰ˆï¼‰è§£å†³SQLæ³¨å…¥é—®é¢˜.html-9cf9e827.js" as="script"><link rel="prefetch" href="/assets/06_å¢åˆ æ”¹ï¼ˆPreparedStatementç‰ˆï¼‰.html-84c78ed0.js" as="script"><link rel="prefetch" href="/assets/07_äº‹åŠ¡æœºåˆ¶.html-df578d75.js" as="script"><link rel="prefetch" href="/assets/08_JDBCå·¥å…·ç±»å°è£….html-3a029bdc.js" as="script"><link rel="prefetch" href="/assets/09_æ¨¡ç³ŠæŸ¥è¯¢.html-ffe7614c.js" as="script"><link rel="prefetch" href="/assets/00_ç®€ä»‹.html-009a57e2.js" as="script"><link rel="prefetch" href="/assets/00_å‰è¨€.html-d482c357.js" as="script"><link rel="prefetch" href="/assets/01_MongoDBç›¸å…³æ¦‚å¿µ.html-dfc0e159.js" as="script"><link rel="prefetch" href="/assets/02_å•æœºéƒ¨ç½².html-a2426064.js" as="script"><link rel="prefetch" href="/assets/03_åŸºæœ¬å¸¸ç”¨å‘½ä»¤.html-70875b6f.js" as="script"><link rel="prefetch" href="/assets/04_æ–‡æ¡£é—´çš„å¯¹åº”å…³ç³».html-1c1b08bc.js" as="script"><link rel="prefetch" href="/assets/05_MongoDBç´¢å¼•.html-4b51cf87.js" as="script"><link rel="prefetch" href="/assets/06_å¾…ç¼–è¾‘.html-775443ea.js" as="script"><link rel="prefetch" href="/assets/01_HBaseç®€ä»‹.html-7c274d55.js" as="script"><link rel="prefetch" href="/assets/02_HBaseå¿«é€Ÿå…¥é—¨.html-c4bb5976.js" as="script"><link rel="prefetch" href="/assets/00_å…³äºIDEA.html-f50e1052.js" as="script"><link rel="prefetch" href="/assets/01_æ ‡è¯†ç¬¦.html-44748ae9.js" as="script"><link rel="prefetch" href="/assets/02_å…³é”®å­—.html-23f595c5.js" as="script"><link rel="prefetch" href="/assets/03_å­—é¢å€¼.html-8322d58b.js" as="script"><link rel="prefetch" href="/assets/04_å˜é‡.html-652b983e.js" as="script"><link rel="prefetch" href="/assets/05_æ•°æ®ç±»å‹.html-266868e0.js" as="script"><link rel="prefetch" href="/assets/06_è¿ç®—ç¬¦.html-22fb29e2.js" as="script"><link rel="prefetch" href="/assets/01_Dockeræ¦‚è¿°.html-135ba6ad.js" as="script"><link rel="prefetch" href="/assets/02_Dockerå®‰è£….html-f31b6310.js" as="script"><link rel="prefetch" href="/assets/03_Dockerä¸‹è½½åŠ é€Ÿ.html-f889b684.js" as="script"><link rel="prefetch" href="/assets/04_Dockerå¸¸ç”¨å‘½ä»¤.html-af39ca42.js" as="script"><link rel="prefetch" href="/assets/05_å®¹å™¨å‘½ä»¤.html-5caae76f.js" as="script"><link rel="prefetch" href="/assets/06_Dockeré•œåƒ.html-32abf3f7.js" as="script"><link rel="prefetch" href="/assets/07_æœ¬åœ°é•œåƒå‘å¸ƒåˆ°é˜¿é‡Œäº‘.html-d24feea4.js" as="script"><link rel="prefetch" href="/assets/08_æœ¬åœ°é•œåƒå‘å¸ƒåˆ°ç§æœ‰ä»“åº“.html-29ce2cec.js" as="script"><link rel="prefetch" href="/assets/09_Dockerå®‰è£…MySQL.html-37dee1a7.js" as="script"><link rel="prefetch" href="/assets/21_åˆè¯†Docker.html-677472f5.js" as="script"><link rel="prefetch" href="/assets/22_Dockerçš„åŸºæœ¬æ“ä½œ.html-724084fa.js" as="script"><link rel="prefetch" href="/assets/23_Dockerfileè‡ªå®šä¹‰é•œåƒ.html-a34625f9.js" as="script"><link rel="prefetch" href="/assets/24_DockerCompose.html-47f04e1e.js" as="script"><link rel="prefetch" href="/assets/25_Dockeré•œåƒä»“åº“.html-9cba8a88.js" as="script"><link rel="prefetch" href="/assets/01_è®¤è¯†å¾®æœåŠ¡.html-7a2eef98.js" as="script"><link rel="prefetch" href="/assets/02_æœåŠ¡æ‹†åˆ†å’Œè¿œç¨‹è°ƒç”¨.html-a74e39b2.js" as="script"><link rel="prefetch" href="/assets/03_Eurekaæ³¨å†Œä¸­å¿ƒ.html-fee40c90.js" as="script"><link rel="prefetch" href="/assets/04_Ribbonè´Ÿè½½å‡è¡¡.html-51772f65.js" as="script"><link rel="prefetch" href="/assets/05_Nacosæ³¨å†Œä¸­å¿ƒ.html-20913598.js" as="script"><link rel="prefetch" href="/assets/06_Nacosé…ç½®ç®¡ç†.html-b3ed9d2b.js" as="script"><link rel="prefetch" href="/assets/07_Feignè¿œç¨‹è°ƒç”¨.html-74dee8c6.js" as="script"><link rel="prefetch" href="/assets/08_GatewayæœåŠ¡ç½‘å…³.html-cdf78e46.js" as="script"><link rel="prefetch" href="/assets/01_Hadoopæ¦‚è¿°.html-dfa9fb4e.js" as="script"><link rel="prefetch" href="/assets/02_Hadoopè¿è¡Œç¯å¢ƒæ­å»º.html-78e6f254.js" as="script"><link rel="prefetch" href="/assets/03_Hadoopè¿è¡Œæ¨¡å¼.html-5d3883b6.js" as="script"><link rel="prefetch" href="/assets/04_å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ.html-4fb3bc53.js" as="script"><link rel="prefetch" href="/assets/01_Zookeeperå…¥é—¨.html-02d2f694.js" as="script"><link rel="prefetch" href="/assets/02_Zookeeperæœ¬åœ°å®‰è£….html-5f2f332e.js" as="script"><link rel="prefetch" href="/assets/03_Zookeeperé›†ç¾¤æ“ä½œ.html-9931e058.js" as="script"><link rel="prefetch" href="/assets/404.html-be95ea95.js" as="script"><link rel="prefetch" href="/assets/index.html-4d0ccd33.js" as="script"><link rel="prefetch" href="/assets/index.html-1fa4ea1a.js" as="script"><link rel="prefetch" href="/assets/index.html-728c4d88.js" as="script"><link rel="prefetch" href="/assets/index.html-78753dee.js" as="script"><link rel="prefetch" href="/assets/index.html-02242348.js" as="script"><link rel="prefetch" href="/assets/index.html-c5f95450.js" as="script"><link rel="prefetch" href="/assets/index.html-0a9f24a1.js" as="script"><link rel="prefetch" href="/assets/index.html-548c491e.js" as="script"><link rel="prefetch" href="/assets/index.html-f021f7bf.js" as="script"><link rel="prefetch" href="/assets/index.html-19f9ad1f.js" as="script"><link rel="prefetch" href="/assets/index.html-9731b3de.js" as="script"><link rel="prefetch" href="/assets/index.html-ef64e872.js" as="script"><link rel="prefetch" href="/assets/index.html-e52cdbeb.js" as="script"><link rel="prefetch" href="/assets/index.html-029f8ccd.js" as="script"><link rel="prefetch" href="/assets/index.html-79a7f9e9.js" as="script"><link rel="prefetch" href="/assets/index.html-5b1c7278.js" as="script"><link rel="prefetch" href="/assets/index.html-c9061322.js" as="script"><link rel="prefetch" href="/assets/index.html-77a51c50.js" as="script"><link rel="prefetch" href="/assets/01_Gitæ¦‚è¿°.html-8ea14a1e.js" as="script"><link rel="prefetch" href="/assets/02_Gitå®‰è£….html-fdc3e43c.js" as="script"><link rel="prefetch" href="/assets/03_Gitå¸¸ç”¨å‘½ä»¤.html-97922c21.js" as="script"><link rel="prefetch" href="/assets/04_Gitåˆ†æ”¯æ“ä½œ.html-aa7e1595.js" as="script"><link rel="prefetch" href="/assets/05_Gitå›¢é˜Ÿåä½œæœºåˆ¶.html-0375e8d8.js" as="script"><link rel="prefetch" href="/assets/06_GitHubæ“ä½œ.html-1c90debf.js" as="script"><link rel="prefetch" href="/assets/07_IDEAé›†æˆGit.html-77f771dd.js" as="script"><link rel="prefetch" href="/assets/08_IDEAé›†æˆGitHub.html-8fb8af02.js" as="script"><link rel="prefetch" href="/assets/00_ç®€ä»‹.html-b48fa702.js" as="script"><link rel="prefetch" href="/assets/00_ç®€ä»‹.html-0a6c26ce.js" as="script"><link rel="prefetch" href="/assets/01_å¢åˆ æ”¹ï¼ˆStatementç‰ˆï¼‰.html-73fb5ce3.js" as="script"><link rel="prefetch" href="/assets/02_æŸ¥è¯¢ï¼ˆStatementç‰ˆï¼‰.html-32348dd1.js" as="script"><link rel="prefetch" href="/assets/03_é…ç½®propertiesæ–‡ä»¶ä¿¡æ¯.html-47b1489c.js" as="script"><link rel="prefetch" href="/assets/04_å®æˆ˜ä¸SQLæ³¨å…¥.html-1d595a37.js" as="script"><link rel="prefetch" href="/assets/05_æŸ¥è¯¢ï¼ˆPreparedStatementç‰ˆï¼‰è§£å†³SQLæ³¨å…¥é—®é¢˜.html-ce768c9f.js" as="script"><link rel="prefetch" href="/assets/06_å¢åˆ æ”¹ï¼ˆPreparedStatementç‰ˆï¼‰.html-1c1dc22a.js" as="script"><link rel="prefetch" href="/assets/07_äº‹åŠ¡æœºåˆ¶.html-b87978c1.js" as="script"><link rel="prefetch" href="/assets/08_JDBCå·¥å…·ç±»å°è£….html-5da38f5f.js" as="script"><link rel="prefetch" href="/assets/09_æ¨¡ç³ŠæŸ¥è¯¢.html-8c4e462b.js" as="script"><link rel="prefetch" href="/assets/00_ç®€ä»‹.html-6671d873.js" as="script"><link rel="prefetch" href="/assets/00_å‰è¨€.html-f15c486a.js" as="script"><link rel="prefetch" href="/assets/01_MongoDBç›¸å…³æ¦‚å¿µ.html-3e349b08.js" as="script"><link rel="prefetch" href="/assets/02_å•æœºéƒ¨ç½².html-cdca6e94.js" as="script"><link rel="prefetch" href="/assets/03_åŸºæœ¬å¸¸ç”¨å‘½ä»¤.html-0ac8219a.js" as="script"><link rel="prefetch" href="/assets/04_æ–‡æ¡£é—´çš„å¯¹åº”å…³ç³».html-e8c90aab.js" as="script"><link rel="prefetch" href="/assets/05_MongoDBç´¢å¼•.html-91c47cae.js" as="script"><link rel="prefetch" href="/assets/06_å¾…ç¼–è¾‘.html-abceb966.js" as="script"><link rel="prefetch" href="/assets/01_HBaseç®€ä»‹.html-adc4546a.js" as="script"><link rel="prefetch" href="/assets/02_HBaseå¿«é€Ÿå…¥é—¨.html-13a46623.js" as="script"><link rel="prefetch" href="/assets/00_å…³äºIDEA.html-f8822ea9.js" as="script"><link rel="prefetch" href="/assets/01_æ ‡è¯†ç¬¦.html-1111acb8.js" as="script"><link rel="prefetch" href="/assets/02_å…³é”®å­—.html-1d9ca517.js" as="script"><link rel="prefetch" href="/assets/03_å­—é¢å€¼.html-d73800b0.js" as="script"><link rel="prefetch" href="/assets/04_å˜é‡.html-c19dbbcb.js" as="script"><link rel="prefetch" href="/assets/05_æ•°æ®ç±»å‹.html-7e7dda59.js" as="script"><link rel="prefetch" href="/assets/06_è¿ç®—ç¬¦.html-0b7e39f1.js" as="script"><link rel="prefetch" href="/assets/01_Dockeræ¦‚è¿°.html-498f2a50.js" as="script"><link rel="prefetch" href="/assets/02_Dockerå®‰è£….html-b89b254f.js" as="script"><link rel="prefetch" href="/assets/03_Dockerä¸‹è½½åŠ é€Ÿ.html-ff9d6edc.js" as="script"><link rel="prefetch" href="/assets/04_Dockerå¸¸ç”¨å‘½ä»¤.html-ba40d67f.js" as="script"><link rel="prefetch" href="/assets/05_å®¹å™¨å‘½ä»¤.html-ec10cf1f.js" as="script"><link rel="prefetch" href="/assets/06_Dockeré•œåƒ.html-e1aac277.js" as="script"><link rel="prefetch" href="/assets/07_æœ¬åœ°é•œåƒå‘å¸ƒåˆ°é˜¿é‡Œäº‘.html-284ca69f.js" as="script"><link rel="prefetch" href="/assets/08_æœ¬åœ°é•œåƒå‘å¸ƒåˆ°ç§æœ‰ä»“åº“.html-8b98727e.js" as="script"><link rel="prefetch" href="/assets/09_Dockerå®‰è£…MySQL.html-eaf73c9f.js" as="script"><link rel="prefetch" href="/assets/21_åˆè¯†Docker.html-0be19e78.js" as="script"><link rel="prefetch" href="/assets/22_Dockerçš„åŸºæœ¬æ“ä½œ.html-64a18c76.js" as="script"><link rel="prefetch" href="/assets/23_Dockerfileè‡ªå®šä¹‰é•œåƒ.html-2d97bc3e.js" as="script"><link rel="prefetch" href="/assets/24_DockerCompose.html-a0964d17.js" as="script"><link rel="prefetch" href="/assets/25_Dockeré•œåƒä»“åº“.html-698733b6.js" as="script"><link rel="prefetch" href="/assets/01_è®¤è¯†å¾®æœåŠ¡.html-5a2de778.js" as="script"><link rel="prefetch" href="/assets/02_æœåŠ¡æ‹†åˆ†å’Œè¿œç¨‹è°ƒç”¨.html-69a506c0.js" as="script"><link rel="prefetch" href="/assets/03_Eurekaæ³¨å†Œä¸­å¿ƒ.html-496654b8.js" as="script"><link rel="prefetch" href="/assets/04_Ribbonè´Ÿè½½å‡è¡¡.html-95530106.js" as="script"><link rel="prefetch" href="/assets/05_Nacosæ³¨å†Œä¸­å¿ƒ.html-64f77cb9.js" as="script"><link rel="prefetch" href="/assets/06_Nacosé…ç½®ç®¡ç†.html-54da3485.js" as="script"><link rel="prefetch" href="/assets/07_Feignè¿œç¨‹è°ƒç”¨.html-34df5baa.js" as="script"><link rel="prefetch" href="/assets/08_GatewayæœåŠ¡ç½‘å…³.html-e3099e4b.js" as="script"><link rel="prefetch" href="/assets/01_Hadoopæ¦‚è¿°.html-d8c4afdc.js" as="script"><link rel="prefetch" href="/assets/02_Hadoopè¿è¡Œç¯å¢ƒæ­å»º.html-7394f62e.js" as="script"><link rel="prefetch" href="/assets/03_Hadoopè¿è¡Œæ¨¡å¼.html-6425cc07.js" as="script"><link rel="prefetch" href="/assets/04_å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ.html-58ccd780.js" as="script"><link rel="prefetch" href="/assets/01_Zookeeperå…¥é—¨.html-71fb188f.js" as="script"><link rel="prefetch" href="/assets/02_Zookeeperæœ¬åœ°å®‰è£….html-ea5abde7.js" as="script"><link rel="prefetch" href="/assets/03_Zookeeperé›†ç¾¤æ“ä½œ.html-97e829a9.js" as="script"><link rel="prefetch" href="/assets/404.html-b8cbf7b5.js" as="script"><link rel="prefetch" href="/assets/index.html-2fe08bac.js" as="script"><link rel="prefetch" href="/assets/index.html-5c40cdbc.js" as="script"><link rel="prefetch" href="/assets/index.html-e2cbb950.js" as="script"><link rel="prefetch" href="/assets/index.html-794da50b.js" as="script"><link rel="prefetch" href="/assets/index.html-70167012.js" as="script"><link rel="prefetch" href="/assets/index.html-f8555e57.js" as="script"><link rel="prefetch" href="/assets/index.html-acd74901.js" as="script"><link rel="prefetch" href="/assets/index.html-58f3397d.js" as="script"><link rel="prefetch" href="/assets/index.html-a0573ff7.js" as="script"><link rel="prefetch" href="/assets/index.html-680321b7.js" as="script"><link rel="prefetch" href="/assets/index.html-7592e635.js" as="script"><link rel="prefetch" href="/assets/index.html-e55b42d0.js" as="script"><link rel="prefetch" href="/assets/index.html-83a4b829.js" as="script"><link rel="prefetch" href="/assets/index.html-84221af5.js" as="script"><link rel="prefetch" href="/assets/index.html-8794f675.js" as="script"><link rel="prefetch" href="/assets/index.html-ffb6c60c.js" as="script"><link rel="prefetch" href="/assets/index.html-2e81a120.js" as="script"><link rel="prefetch" href="/assets/giscus-0b7adcf8.js" as="script"><link rel="prefetch" href="/assets/auto-712ff3ee.js" as="script"><link rel="prefetch" href="/assets/index-2bf332f6.js" as="script"><link rel="prefetch" href="/assets/flowchart-c441f34d.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-b1fb99a9.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-abe06b83.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-29cfc7c0.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt="é›¶å·æ˜Ÿçƒå›¾ä¹¦é¦†"><!----><span class="vp-site-name hide-in-pad">é›¶å·æ˜Ÿçƒå›¾ä¹¦é¦†</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><!---->é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å¿…å¤‡æŠ€èƒ½"><span class="title"><!---->å¿…å¤‡æŠ€èƒ½</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/01_skills/01_linux/"><!---->Linux<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/01_skills/02_maven_base/"><!---->MavenåŸºç¡€<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/01_skills/03_git/"><!---->Git<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å‰ç«¯"><span class="title"><!---->å‰ç«¯</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/02_front_end/01_html/"><!---->HTML<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/02_front_end/02_css/"><!---->CSS<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/02_front_end/03_javascript/"><!---->JavaScript<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/02_front_end/04_vue/"><!---->Vue<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="æ•°æ®åº“"><span class="title"><!---->æ•°æ®åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å…³ç³»å‹æ•°æ®åº“</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/03_database/01_mysql/"><!---->MySQL<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/03_database/02_jdbc/"><!---->JDBC<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>éå…³ç³»å‹æ•°æ®åº“</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/03_database/03_redis/"><!---->Redis<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/03_database/04_mongodb/"><!---->MongoDB<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/03_database/05_hbase/"><!---->HBase<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/03_database/06_neo4j/"><!---->Neo4j<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Java"><span class="title"><!---->Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/04_java/01_javase/"><!---->JavaSE<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/04_java/02_java8/"><!---->Java 8<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="JavaWeb"><span class="title"><!---->JavaWeb</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/01_jquery/"><!---->jQuery<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/02_xml/"><!---->XML<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/03_tomcat/"><!---->Tomcat<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/04_servlet/"><!---->Servlet<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/05_jsp/"><!---->JSP<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/06_el/"><!---->EL<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/07_jstl/"><!---->JSTL<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/08_file_upload_and_download/"><!---->æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/09_cookies/"><!---->Cookies<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/10_session/"><!---->Session<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/11_filter/"><!---->Filter<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/12_json/"><!---->JSON<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/13_ajax/"><!---->AJAX<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/05_javaweb/14_i18n/"><!---->i18n<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Springæ¡†æ¶"><span class="title"><!---->Springæ¡†æ¶</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>SSM</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/06_spring_framework/01_mybatis/"><!---->MyBatis<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/06_spring_framework/02_spring/"><!---->Spring<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/06_spring_framework/03_springmvc/"><!---->SpringMVC<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>è¿›é˜¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/06_spring_framework/04_maven_advance/"><!---->Mavenè¿›é˜¶<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/06_spring_framework/05_springboot/"><!---->SpringBoot<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/06_spring_framework/06_mybatis_plus/"><!---->MyBatisPlus<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/06_spring_framework/07_spring_security/"><!---->SpringSecurity<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="æœåŠ¡å™¨"><span class="title"><!---->æœåŠ¡å™¨</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å®¹å™¨</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link active" href="/07_server/01_docker/"><!---->Docker<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/07_server/02_k8s/"><!---->K8S<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>è¿ç»´</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/07_server/03_nginx/"><!---->Nginx<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/07_server/04_netty/"><!---->Nettyç½‘ç»œç¼–ç¨‹<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å¾®æœåŠ¡"><span class="title"><!---->å¾®æœåŠ¡</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/08_microservices/01_dubbo/"><!---->Dubbo<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/08_microservices/02_springcloud/"><!---->SpringCloud<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/08_microservices/03_springcloudalibaba/"><!---->SpringCloudAlibaba<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ä¸­é—´ä»¶"><span class="title"><!---->ä¸­é—´ä»¶</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/09_middleware/01_rabbitmq/"><!---->RabbitMQ<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/09_middleware/02_rocketmq/"><!---->RocketMQ<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å¤§æ•°æ®"><span class="title"><!---->å¤§æ•°æ®</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/10_big_data/01_spider/"><!---->çˆ¬è™«<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/10_big_data/02_hadoop/"><!---->Hadoop<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/10_big_data/03_zookeeper/"><!---->Zookeeper<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Python"><span class="title"><!---->Python</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/11_python/01_python_base/"><!---->PythonåŸºç¡€<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/11_python/02_python_advance/"><!---->Pythonè¿›é˜¶<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="C++"><span class="title"><!---->C++</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/12_cpp/01_cpp_base/"><!---->C++åŸºç¡€<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/12_cpp/02_cpp_advance/"><!---->C++è¿›é˜¶<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Rust"><span class="title"><!---->Rust</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/13_rust/01_rust_base/"><!---->RuståŸºç¡€<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/13_rust/02_rust_advance/"><!---->Rustè¿›é˜¶<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/lhplanet" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/"><!---->é¦–é¡µ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">01 Skills</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">03 Database</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">04 Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">07 Server</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">01 Docker</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/01_Docker%E6%A6%82%E8%BF%B0.html"><!---->01_Dockeræ¦‚è¿°<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/02_Docker%E5%AE%89%E8%A3%85.html"><!---->02_Dockerå®‰è£…<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/03_Docker%E4%B8%8B%E8%BD%BD%E5%8A%A0%E9%80%9F.html"><!---->03_Dockerä¸‹è½½åŠ é€Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/04_Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html"><!---->04_Dockerå¸¸ç”¨å‘½ä»¤<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/05_%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4.html"><!---->05_å®¹å™¨å‘½ä»¤<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/06_Docker%E9%95%9C%E5%83%8F.html"><!---->06_Dockeré•œåƒ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/07_%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F%E5%8F%91%E5%B8%83%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91.html"><!---->07_æœ¬åœ°é•œåƒå‘å¸ƒåˆ°é˜¿é‡Œäº‘<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/08_%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F%E5%8F%91%E5%B8%83%E5%88%B0%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93.html"><!---->08_æœ¬åœ°é•œåƒå‘å¸ƒåˆ°ç§æœ‰ä»“åº“<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/09_Docker%E5%AE%89%E8%A3%85MySQL.html"><!---->09_Dockerå®‰è£…MySQL<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html"><!---->10_Dockerå®‰è£…Redis<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#dockerå®‰è£…redis"><!---->Dockerå®‰è£…Redis<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#å•æœºç‰ˆå®‰è£…"><!---->å•æœºç‰ˆå®‰è£…<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#ç®€å•ç‰ˆ-redis"><!---->ç®€å•ç‰ˆ Redis<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#å®é™…åº”ç”¨ç‰ˆredis"><!---->å®é™…åº”ç”¨ç‰ˆRedis<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#é›†ç¾¤å­˜å‚¨ç®—æ³•"><!---->é›†ç¾¤å­˜å‚¨ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#åˆ†å¸ƒå¼å­˜å‚¨ç®—æ³•"><!---->åˆ†å¸ƒå¼å­˜å‚¨ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#å“ˆå¸Œå–ä½™ç®—æ³•"><!---->å“ˆå¸Œå–ä½™ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•"><!---->ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#å“ˆå¸Œæ§½åˆ†åŒº"><!---->å“ˆå¸Œæ§½åˆ†åŒº<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#redisé›†ç¾¤å­˜å‚¨ç­–ç•¥"><!---->Redisé›†ç¾¤å­˜å‚¨ç­–ç•¥<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#_3ä¸»3ä»redisé›†ç¾¤"><!---->3ä¸»3ä»Redisé›†ç¾¤<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#æ­å»º"><!---->æ­å»º<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#redisé›†ç¾¤è¯»å†™å‡ºé”™"><!---->Redisé›†ç¾¤è¯»å†™å‡ºé”™<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#é›†ç¾¤ä¿¡æ¯æ£€æŸ¥"><!---->é›†ç¾¤ä¿¡æ¯æ£€æŸ¥<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#ä¸»ä»æ‰©å®¹ç¼©å®¹"><!---->ä¸»ä»æ‰©å®¹ç¼©å®¹<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#ä¸»ä»æ‰©å®¹"><!---->ä¸»ä»æ‰©å®¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/07_server/01_docker/10_Docker%E5%AE%89%E8%A3%85Redis.html#ä¸»ä»ç¼©å®¹"><!---->ä¸»ä»ç¼©å®¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/21_%E5%88%9D%E8%AF%86Docker.html"><!---->21_åˆè¯†Docker<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/22_Docker%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html"><!---->22_Dockerçš„åŸºæœ¬æ“ä½œ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/23_Dockerfile%E8%87%AA%E5%AE%9A%E4%B9%89%E9%95%9C%E5%83%8F.html"><!---->23_Dockerfileè‡ªå®šä¹‰é•œåƒ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/24_DockerCompose.html"><!---->24_DockerCompose<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/07_server/01_docker/25_Docker%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93.html"><!---->25_Dockeré•œåƒä»“åº“<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">08 Microservices</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">10 Big Data</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->10_Dockerå®‰è£…Redis</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="http://152.136.173.53:8090/" target="_blank" rel="noopener noreferrer">LHP</a></span><span property="author" content="LHP"></span></span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-10-24T08:56:06.000Z"></span><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 5331 å­—</span><meta property="wordCount" content="5331"></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#dockerå®‰è£…redis">Dockerå®‰è£…Redis</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#å•æœºç‰ˆå®‰è£…">å•æœºç‰ˆå®‰è£…</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#ç®€å•ç‰ˆ-redis">ç®€å•ç‰ˆ Redis</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#å®é™…åº”ç”¨ç‰ˆredis">å®é™…åº”ç”¨ç‰ˆRedis</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#é›†ç¾¤å­˜å‚¨ç®—æ³•">é›†ç¾¤å­˜å‚¨ç®—æ³•</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#åˆ†å¸ƒå¼å­˜å‚¨ç®—æ³•">åˆ†å¸ƒå¼å­˜å‚¨ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#å“ˆå¸Œå–ä½™ç®—æ³•">å“ˆå¸Œå–ä½™ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•">ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#å“ˆå¸Œæ§½åˆ†åŒº">å“ˆå¸Œæ§½åˆ†åŒº</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#redisé›†ç¾¤å­˜å‚¨ç­–ç•¥">Redisé›†ç¾¤å­˜å‚¨ç­–ç•¥</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_3ä¸»3ä»redisé›†ç¾¤">3ä¸»3ä»Redisé›†ç¾¤</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#æ­å»º">æ­å»º</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#redisé›†ç¾¤è¯»å†™å‡ºé”™">Redisé›†ç¾¤è¯»å†™å‡ºé”™</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#é›†ç¾¤ä¿¡æ¯æ£€æŸ¥">é›†ç¾¤ä¿¡æ¯æ£€æŸ¥</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#ä¸»ä»æ‰©å®¹ç¼©å®¹">ä¸»ä»æ‰©å®¹ç¼©å®¹</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#ä¸»ä»æ‰©å®¹">ä¸»ä»æ‰©å®¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#ä¸»ä»ç¼©å®¹">ä¸»ä»ç¼©å®¹</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="dockerå®‰è£…redis" tabindex="-1"><a class="header-anchor" href="#dockerå®‰è£…redis" aria-hidden="true">#</a> Dockerå®‰è£…Redis</h2><p>ä»¥ Redis 6.0.8 ä¸ºä¾‹ï¼š</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>docker pull redis:6.0.8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="å•æœºç‰ˆå®‰è£…" tabindex="-1"><a class="header-anchor" href="#å•æœºç‰ˆå®‰è£…" aria-hidden="true">#</a> å•æœºç‰ˆå®‰è£…</h2><h3 id="ç®€å•ç‰ˆ-redis" tabindex="-1"><a class="header-anchor" href="#ç®€å•ç‰ˆ-redis" aria-hidden="true">#</a> ç®€å•ç‰ˆ Redis</h3><p>ç®€å•çš„å¯åŠ¨Rediså®¹å™¨ï¼š</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>docker run -p 6379:6379 -d redis:6.0.8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç®€å•ç‰ˆæ²¡æœ‰é…ç½®å®¹å™¨å·æ˜ å°„ï¼Œå½“å®¹å™¨è¢«åˆ é™¤æ—¶æ•°æ®æ— æ³•æ¢å¤ã€‚</p><h3 id="å®é™…åº”ç”¨ç‰ˆredis" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç‰ˆredis" aria-hidden="true">#</a> å®é™…åº”ç”¨ç‰ˆRedis</h3><p>é…ç½®æ–‡ä»¶ã€æ•°æ®æ–‡ä»¶éƒ½å’Œå®¹å™¨å·è¿›è¡Œæ˜ å°„ã€‚</p><p>æ­¥éª¤ï¼š</p><ol><li>å®¿ä¸»æœºåˆ›å»ºç›®å½•/app/redis</li><li>åœ¨/app/redisä¸‹åˆ›å»ºæ–‡ä»¶redis.confï¼Œä¸»è¦ä¿®æ”¹ä»¥ä¸‹å‡ é¡¹é…ç½®</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code># å¼€å¯å¯†ç éªŒè¯ï¼ˆå¯é€‰ï¼‰
requirepass 123

# å…è®¸rediså¤–åœ°è¿æ¥ï¼Œéœ€è¦æ³¨é‡Šæ‰ç»‘å®šçš„IP
# bind 127.0.0.1

# å…³é—­ä¿æŠ¤æ¨¡å¼ï¼ˆå¯é€‰ï¼‰
protected-mode no

# æ³¨é‡Šæ‰daemonize yesï¼Œæˆ–è€…é…ç½®æˆ daemonize noã€‚å› ä¸ºè¯¥é…ç½®å’Œ docker runä¸­çš„ -d å‚æ•°å†²çªï¼Œä¼šå¯¼è‡´å®¹å™¨ä¸€ç›´å¯åŠ¨å¤±è´¥
daemonize no

# å¼€å¯redisæ•°æ®æŒä¹…åŒ–ï¼Œ ï¼ˆå¯é€‰ï¼‰
appendonly yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å³æœ€åçš„é…ç½®æ–‡ä»¶ä¸ºï¼š<br> 3. å¯åŠ¨dockerå®¹å™¨ï¼šï¼ˆå› ä¸ºè¦ä½¿ç”¨è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šå®¹å™¨è¿è¡Œçš„å‘½ä»¤ä¸ºredis-server å®¹å™¨å†…é…ç½®æ–‡ä»¶è·¯å¾„ï¼‰</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>docker run -d -p 6379:6379 --name redis --privileged=true \
           -v /app/redis/redis.conf:/etc/redis/redis.conf \
           -v /app/redis/data:/data \
           redis:6.0.8 \
           redis-server /etc/redis/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é›†ç¾¤å­˜å‚¨ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#é›†ç¾¤å­˜å‚¨ç®—æ³•" aria-hidden="true">#</a> é›†ç¾¤å­˜å‚¨ç®—æ³•</h2><h3 id="åˆ†å¸ƒå¼å­˜å‚¨ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#åˆ†å¸ƒå¼å­˜å‚¨ç®—æ³•" aria-hidden="true">#</a> åˆ†å¸ƒå¼å­˜å‚¨ç®—æ³•</h3><p>åˆ†å¸ƒå¼å­˜å‚¨çš„å¸¸è§ç®—æ³•ï¼š</p><ul><li>å“ˆå¸Œå–ä½™ç®—æ³•åˆ†åŒº</li><li>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åˆ†åŒº</li><li>å“ˆå¸Œæ§½ç®—æ³•åˆ†åŒº</li></ul><h3 id="å“ˆå¸Œå–ä½™ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#å“ˆå¸Œå–ä½™ç®—æ³•" aria-hidden="true">#</a> å“ˆå¸Œå–ä½™ç®—æ³•</h3><p>ç®—æ³•æè¿°ï¼šhash(key) % Nï¼ˆå…¶ä¸­ï¼Œkeyæ˜¯è¦å­˜å…¥Redisçš„é”®åï¼ŒNæ˜¯Redisé›†ç¾¤çš„æœºå™¨å°æ•°ï¼‰ã€‚ç”¨æˆ·æ¯æ¬¡è¯»å†™æ“ä½œï¼Œéƒ½æ˜¯æ ¹æ®ä¼ å…¥çš„é”®åç»è¿‡å“ˆå¸Œè¿ç®—ï¼Œå¯¹æœºå™¨å°æ•°å–ä½™å†³å®šè¯¥é”®å­˜å‚¨åœ¨å“ªå°æœåŠ¡å™¨ä¸Šã€‚</p><p>ä¼˜ç‚¹ï¼šç®€å•ç›´æ¥æœ‰æ•ˆï¼Œåªéœ€è¦é¢„ä¼°å¥½æ•°æ®è§„åˆ’å¥½èŠ‚ç‚¹ï¼Œå°±èƒ½ä¿è¯ä¸€æ®µæ—¶é—´çš„æ•°æ®æ”¯æ’‘ã€‚ä½¿ç”¨Hashç®—æ³•è®©å›ºå®šçš„ä¸€éƒ¨åˆ†è¯·æ±‚è½åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·æ¯å°æœåŠ¡å™¨å›ºå®šå¤„ç†ä¸€éƒ¨åˆ†è¯·æ±‚ï¼ˆå¹¶ç»´æŠ¤è¿™äº›è¯·æ±‚çš„ä¿¡æ¯ï¼‰ï¼Œèµ·åˆ°è´Ÿè½½å‡è¡¡+åˆ†è€Œæ²»ä¹‹çš„ä½œç”¨ã€‚</p><p>ç¼ºç‚¹ï¼šåŸæ¥è§„åˆ’å¥½çš„èŠ‚ç‚¹ï¼Œå¦‚æœè¿›è¡Œäº†æ‰©å®¹æˆ–è€…ç¼©å®¹ï¼Œå¯¼è‡´èŠ‚ç‚¹æœ‰å˜åŠ¨ï¼Œæ˜ å°„å…³ç³»éœ€è¦é‡æ–°è¿›è¡Œè®¡ç®—ã€‚åœ¨æœåŠ¡å™¨ä¸ªæ•°å›ºå®šä¸å˜æ—¶æ²¡é—®é¢˜ï¼Œå¦‚æœéœ€è¦å¼¹æ€§æ‰©å®¹æˆ–è€…æ•…éšœåœæœºçš„æƒ…å†µä¸‹ï¼ŒåŸæ¥å–æ¨¡å…¬å¼ä¸­çš„ Nå°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ­¤æ—¶ç»è¿‡å–æ¨¡è¿ç®—çš„ç»“æœå°±ä¼šå‘ç”Ÿå¾ˆå¤§å˜åŒ–ï¼Œå¯¼è‡´æ ¹æ®å…¬å¼è·å–çš„æœåŠ¡å™¨å˜å¾—ä¸å¯æ§ã€‚</p><h3 id="ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•" tabindex="-1"><a class="header-anchor" href="#ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•" aria-hidden="true">#</a> ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</h3><p>ç®—æ³•èƒŒæ™¯ï¼šä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ˜¯ä¸ºäº†è§£å†³å“ˆå¸Œå–ä½™ç®—æ³•ä¸­çš„åˆ†å¸ƒå¼ç¼“å­˜æ•°æ®å˜åŠ¨å’Œæ˜ å°„é—®é¢˜ã€‚å½“æœåŠ¡å™¨ä¸ªæ•°å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°½é‡å‡å°‘å½±å“åˆ°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„æ˜ å°„å…³ç³»ã€‚</p><p>ç®—æ³•æè¿°ï¼š<br> ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¿…ç„¶æœ‰ä¸ªhashå‡½æ•°å¹¶æŒ‰ç…§ç®—æ³•äº§ç”ŸHashå€¼ï¼Œè¿™ä¸ªç®—æ³•çš„æ‰€æœ‰å¯èƒ½å“ˆå¸Œå€¼ä¼šæ„æˆä¸€ä¸ªå…¨é‡é›†ï¼Œè¿™ä¸ªé›†åˆå¯ä»¥æˆä¸ºä¸€ä¸ªHashåŒºé—´[0, 2^32 - 1]ï¼Œè¿™æ˜¯ä¸€ä¸ªçº¿æ€§ç©ºé—´ã€‚ä½†æ˜¯åœ¨è¿™ä¸ªç®—æ³•ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡é€‚å½“çš„é€»è¾‘æ§åˆ¶å°†å®ƒé¦–å°¾ç›¸è¿ï¼ˆ0 = 2^32ï¼‰ï¼Œè¿™æ ·è®©å®ƒé€»è¾‘ä¸Šå½¢æˆäº†ä¸€ä¸ªç¯å½¢ç©ºé—´ã€‚</p><p>å®ƒä¹Ÿæ˜¯æŒ‰ç…§ä½¿ç”¨å–æ¨¡çš„æ–¹å¼ã€‚å‰é¢çš„å“ˆå¸Œå–ä½™ç®—æ³•æ˜¯å¯¹èŠ‚ç‚¹ä¸ªæ•°è¿›è¡Œå–æ¨¡ï¼Œè€Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ˜¯å¯¹ 2^32å–æ¨¡ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œä¸€è‡´æ€§Hashç®—æ³•å°†æ•´ä¸ªå“ˆå¸Œå€¼ç©ºé—´ç»„æˆä¸€ä¸ªè™šæ‹Ÿçš„åœ†ç¯ã€‚å¦‚å‡è®¾æŸä¸ªå“ˆå¸Œå‡½æ•°Hçš„å€¼ç©ºé—´ä¸º 0åˆ°2^32 - 1ï¼ˆå³å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ª32ä½æ— ç¬¦å·æ•´å½¢ï¼‰ï¼Œæ•´ä¸ªå“ˆå¸Œç¯å¦‚ä¸‹å›¾ï¼šæ•´ä¸ªç©ºé—´æŒ‰é¡ºæ—¶é’ˆæ–¹å‘ç»„ç»‡ï¼Œåœ†ç¯çš„æ­£ä¸Šæ–¹çš„ç‚¹ä»£è¡¨0ï¼Œ0ç‚¹å³ä¾§çš„ç¬¬ä¸€ä¸ªç‚¹ä»£è¡¨1ï¼Œä»¥æ­¤ç±»æ¨ï¼Œ2ã€3ã€4.......ç›´åˆ°2^32 - 1ï¼Œä¹Ÿå°±æ˜¯è¯´0ç‚¹å·¦ä¾§çš„ç¬¬ä¸€ä¸ªç‚¹ä»£è¡¨ 2^32 - 1ã€‚0 å’Œ 2^32 - 1åœ¨é›¶ç‚¹é’Ÿæ–¹å‘é‡åˆï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªç”± 2^32ä¸ªç‚¹ç»„æˆçš„åœ†ç¯ç§°ä¸ºHashç¯ã€‚</p><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231024111844.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æœ‰äº†å“ˆå¸Œç¯ä¹‹åï¼Œè¿˜éœ€è¦è¿›è¡ŒèŠ‚ç‚¹æ˜ å°„ï¼Œå°†é›†ç¾¤ä¸­å„ä¸ªIPèŠ‚ç‚¹æ˜ å°„åˆ°ç¯ä¸Šçš„æŸä¸€ä¸ªä½ç½®ã€‚</p><p>å°†å„ä¸ªæœåŠ¡å™¨ä½¿ç”¨Hashè¿›è¡Œä¸€ä¸ªå“ˆå¸Œï¼Œå…·ä½“å¯ä»¥é€‰æ‹©æœåŠ¡å™¨çš„IPæˆ–ä¸»æœºåä½œä¸ºå…³é”®å­—è¿›è¡Œå“ˆå¸Œã€‚è¿™æ ·æ¯å°æœºå™¨å°±èƒ½ç¡®å®šå…¶åœ¨å“ˆå¸Œç¯ä¸Šçš„ä½ç½®ã€‚</p><p>å‡å¦‚4ä¸ªèŠ‚ç‚¹NodeAã€Bã€Cã€Dï¼Œç»è¿‡IPåœ°å€çš„å“ˆå¸Œå‡½æ•°è®¡ç®—ï¼ˆhash(ip)ï¼‰ï¼Œä½¿ç”¨IPåœ°å€å“ˆå¸Œå€¼ååœ¨ç¯ç©ºé—´çš„ä½ç½®å¦‚ä¸‹ï¼š</p><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231024111900.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>keyè½åˆ°æœåŠ¡å™¨çš„è½é”®è§„åˆ™ã€‚å½“æˆ‘ä»¬éœ€è¦å­˜å‚¨ä¸€ä¸ªkeyé”®å€¼å¯¹æ—¶ï¼Œé¦–å…ˆè®¡ç®—keyçš„hashå€¼ï¼ˆhash(key)ï¼‰ï¼Œå°†è¿™ä¸ªkeyä½¿ç”¨ç›¸åŒçš„å‡½æ•°hashï¼Œè®¡ç®—å‡ºå“ˆå¸Œå€¼å¹¶ç¡®å®šæ­¤æ•°æ®åœ¨ç¯ä¸Šçš„ä½ç½®ï¼Œä»æ­¤ä½ç½®æ²¿ç¯é¡ºæ—¶é’ˆâ€œè¡Œèµ°â€ï¼Œç¬¬ä¸€å°é‡åˆ°çš„æœåŠ¡å™¨å°±æ˜¯å…¶åº”è¯¥å®šä½åˆ°çš„æœåŠ¡å™¨ï¼Œå¹¶å°†è¯¥é”®å€¼å¯¹å­˜å‚¨å­—è¯¥èŠ‚ç‚¹ä¸Šã€‚</p><p>å‡å¦‚æˆ‘ä»¬æœ‰ObjectAã€Bã€Cã€Då››ä¸ªæ•°æ®å¯¹è±¡ï¼Œç»è¿‡å“ˆå¸Œè®¡ç®—åï¼Œåœ¨ç¯ç©ºé—´ä¸Šçš„ä½ç½®å¦‚ä¸‹ï¼šæ ¹æ®ä¸€è‡´æ€§hashç®—æ³•ï¼Œæ•°æ®Aä¼šè¢«å®šä½åˆ°NodeAä¸Šï¼ŒBè¢«å®šä½åˆ°NodeBä¸Šï¼ŒCè¢«å®šä½åˆ°NodeCä¸Šï¼ŒDè¢«å®šä½åˆ°NodeDä¸Šã€‚</p><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231024111924.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å‡è®¾NodeCå®•æœºï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶å¯¹è±¡Aã€Bã€Dä¸ä¼šå—åˆ°å½±å“ï¼Œåªæœ‰Cå¯¹è±¡è¢«é‡æ–°å®šä½åˆ°NodeDã€‚</p><p>ä¸€èˆ¬çš„ï¼Œåœ¨ä¸€è‡´æ€§Hashç®—æ³•ä¸­ï¼Œå¦‚æœä¸€å°æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œåˆ™å—å½±å“çš„æ•°æ®ä»…ä»…æ˜¯æ­¤æœåŠ¡å™¨åˆ°å…¶ç¯ç©ºé—´ä¸­å‰ä¸€å°æœåŠ¡å™¨ï¼ˆå³æ²¿ç€é€†æ—¶é’ˆæ–¹å‘è¡Œèµ°é‡åˆ°çš„ç¬¬ä¸€å°æœåŠ¡å™¨ï¼‰ä¹‹é—´çš„æ•°æ®ï¼Œå…¶ä»–ä¸ä¼šå—åˆ°å½±å“ã€‚</p><p>å³ï¼šå‡è®¾NodeCå®•æœºï¼Œåªä¼šå½±å“åˆ°Hashå®šä½åˆ°NodeBåˆ°NodeCä¹‹é—´çš„æ•°æ®ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®ä¼šè¢«è½¬ç§»åˆ°NodeDè¿›è¡Œå­˜å‚¨ã€‚</p><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231024111934.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å‡å¦‚éœ€è¦æ‰©å®¹å¢åŠ ä¸€å°èŠ‚ç‚¹NodeXï¼ŒNodeXçš„hash(ip)ä½äºNodeBå’ŒNodeCä¹‹é—´ï¼Œé‚£å—åˆ°å½±å“çš„å°±æ˜¯NodeB åˆ° NodeX ä¹‹é—´çš„æ•°æ®ã€‚é‡æ–°å°†Båˆ°Xçš„æ•°æ®å½•å…¥åˆ°XèŠ‚ç‚¹ä¸Šå³å¯ï¼Œä¸ä¼šå¯¼è‡´Hashå–ä½™å…¨éƒ¨æ•°æ®é‡æ–°æ´—ç‰Œçš„åæœã€‚</p><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231024111946.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä½†æ˜¯Hashç¯ä¼šå­˜åœ¨æ•°æ®å€¾æ–œé—®é¢˜ã€‚</p><p>ä¸€è‡´æ€§Hashç®—æ³•åœ¨æœåŠ¡èŠ‚ç‚¹å¤ªå°‘æ—¶ï¼Œå®¹æ˜“å› ä¸ºèŠ‚ç‚¹åˆ†å¸ƒä¸å‡åŒ€è€Œé€ æˆæ•°æ®å€¾æ–œï¼ˆè¢«ç¼“å­˜çš„å¯¹è±¡éƒ½é›†ä¸­åˆ°æŸä¸€å°æˆ–æŸå‡ å°æœåŠ¡å™¨ï¼‰ã€‚</p><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231024112010.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¸ºäº†è§£å†³æ•°æ®å€¾æ–œé—®é¢˜ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¼•å…¥äº†è™šæ‹ŸèŠ‚ç‚¹æœºåˆ¶ã€‚</p><p>å¯¹æ¯ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹è®¡ç®—å¤šä¸ªå“ˆå¸Œï¼Œæ¯ä¸ªè®¡ç®—ç»“æœä½ç½®éƒ½æ”¾ç½®ä¸€ä¸ªæ­¤æœåŠ¡èŠ‚ç‚¹ï¼Œç§°ä¸ºè™šæ‹ŸèŠ‚ç‚¹ã€‚å…·ä½“åšæ³•å¯ä»¥å…ˆç¡®å®šæ¯ä¸ªç‰©ç†èŠ‚ç‚¹å…³è”çš„è™šæ‹ŸèŠ‚ç‚¹æ•°é‡ï¼Œç„¶ååœ¨IPæˆ–ä¸»æœºååé¢åŠ ä¸Šç¼–å·ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯ä»¥å¯¹NodeAèŠ‚ç‚¹è™šæ‹Ÿå‡º NodeA#1ã€NodeA#2ã€NodeA#3ï¼Œå¯¹NodeBè™šæ‹Ÿå‡ºNodeB#1ã€NodeB#2ã€NodeB#3çš„èŠ‚ç‚¹ï¼Œå½¢æˆå…­ä¸ªè™šæ‹ŸèŠ‚ç‚¹ã€‚</p><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231024112020.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¼˜ç‚¹ï¼šåŠ å…¥å’Œåˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œåªä¼šå½±å“å“ˆå¸Œç¯ä¸­é¡ºæ—¶é’ˆæ–¹å‘ç›¸é‚»èŠ‚ç‚¹ï¼Œå¯¹å…¶ä»–èŠ‚ç‚¹æ— å½±å“ã€‚</p><p>ç¼ºç‚¹ï¼šæ•°æ®çš„åˆ†å¸ƒå’ŒèŠ‚ç‚¹çš„ä½ç½®æœ‰å…³ï¼Œå› ä¸ºè¿™äº›èŠ‚ç‚¹ä¸æ˜¯å‡åŒ€åˆ†å¸ƒåœ¨å“ˆå¸Œç¯ä¸Šçš„ï¼Œæ‰€ä»¥åœ¨æ•°æ®è¿›è¡Œå­˜å‚¨æ—¶è¾¾ä¸åˆ°å‡åŒ€éƒ¨åˆ†çš„æ•ˆæœã€‚</p><h3 id="å“ˆå¸Œæ§½åˆ†åŒº" tabindex="-1"><a class="header-anchor" href="#å“ˆå¸Œæ§½åˆ†åŒº" aria-hidden="true">#</a> å“ˆå¸Œæ§½åˆ†åŒº</h3><p>å“ˆå¸Œæ§½åˆ†åŒºæ˜¯ä¸ºäº†è§£å†³ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„æ•°æ®å€¾æ–œé—®é¢˜ã€‚</p><p>å“ˆå¸Œæ§½å®è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ [0, 2^14 - 1]å½¢æˆçš„ hash slotç©ºé—´ã€‚</p><p>ç›®çš„æ˜¯ä¸ºäº†è§£å†³å‡åŒ€åˆ†é…çš„é—®é¢˜ã€‚åœ¨æ•°æ®å’ŒèŠ‚ç‚¹ä¹‹é—´åˆåŠ å…¥äº†ä¸€å±‚ï¼ŒæŠŠè¿™å±‚ç§°ä¹‹ä¸ºæ§½ï¼ˆslotï¼‰ï¼Œç”¨äºç®¡ç†æ•°æ®å’ŒèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚å°±ç›¸å½“äºèŠ‚ç‚¹ä¸Šæ”¾çš„æ˜¯æ§½ï¼Œæ§½é‡Œé¢æ”¾çš„æ˜¯æ•°æ®ã€‚</p><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231024112036.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ§½è§£å†³çš„æ˜¯ç²’åº¦é—®é¢˜ï¼Œç›¸å½“äºæŠŠç²’åº¦å˜å¤§äº†ï¼Œè¿™æ ·ä¾¿äºæ•°æ®ç§»åŠ¨ã€‚</p><p>å“ˆå¸Œè§£å†³çš„æ˜¯æ˜ å°„é—®é¢˜ï¼Œä½¿ç”¨keyçš„å“ˆå¸Œå€¼æ¥è®¡ç®—æ‰€åœ¨çš„æ§½ï¼Œä¾¿äºæ•°æ®åˆ†é…ã€‚</p><p>ä¸€ä¸ªé›†ç¾¤åªèƒ½æœ‰ 16394ä¸ªæ§½ï¼Œç¼–å· 0 - 16383ï¼ˆ2^14 - 1ï¼‰ã€‚è¿™äº›æ§½ä¼šåˆ†é…ç»™é›†ç¾¤ä¸­æ‰€æœ‰çš„ä¸»èŠ‚ç‚¹ï¼Œåˆ†é…ç­–ç•¥æ²¡æœ‰è¦æ±‚ã€‚å¯ä»¥æŒ‡å®šå“ªäº›ç¼–å·çš„æ§½åˆ†é…ç»™å“ªä¸ªä¸»èŠ‚ç‚¹ï¼Œé›†ç¾¤ä¼šè®°å½•èŠ‚ç‚¹å’Œæ§½çš„å¯¹åº”å…³ç³»ã€‚</p><p>è§£å†³äº†èŠ‚ç‚¹å’Œæ§½çš„å…³ç³»åï¼Œæ¥ä¸‹æ¥å°±éœ€è¦å¯¹keyæ±‚å“ˆå¸Œå€¼ï¼Œç„¶åå¯¹16384å–ä½™ï¼Œæ ¹æ®ä½™æ•°å†³å®škeyè½åˆ°å“ªä¸ªæ§½é‡Œã€‚</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>slot = CRC16(key) % 16384
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»¥æ§½ä¸ºå•ä½ç§»åŠ¨æ•°æ®ï¼Œå› ä¸ºæ§½çš„æ•°ç›®æ˜¯å›ºå®šçš„ï¼Œå¤„ç†èµ·æ¥æ¯”è¾ƒå®¹æ˜“ï¼Œè¿™æ ·æ•°æ®ç§»åŠ¨é—®é¢˜å°±è§£å†³äº†ã€‚</p><h3 id="redisé›†ç¾¤å­˜å‚¨ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#redisé›†ç¾¤å­˜å‚¨ç­–ç•¥" aria-hidden="true">#</a> Redisé›†ç¾¤å­˜å‚¨ç­–ç•¥</h3><p>Redisé›†ç¾¤ä½¿ç”¨çš„å°±æ˜¯å“ˆå¸Œæ§½ã€‚Redisé›†ç¾¤æœ‰16384ä¸ªå“ˆå¸Œæ§½ï¼Œæ¯ä¸ªkeyé€šè¿‡CRC16æ ¡éªŒåå¯¹16384å–æ¨¡æ¥å†³å®šæ”¾ç½®åœ¨å“ªä¸ªæ§½ï¼Œé›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†hashæ§½ã€‚</p><p>å“ˆå¸Œæ§½æ•°é‡16384ï¼ˆ2^14ï¼‰çš„å†³å®šåŸå› ï¼š<br> CRC16ç®—æ³•äº§ç”Ÿçš„hashå€¼æœ‰ 16bitï¼Œè¯¥ç®—æ³•å¯ä»¥äº§ç”Ÿ 2^16 = 65536ä¸ªå€¼ã€‚ä½†æ˜¯ä¸ºäº†å¿ƒè·³æ–¹ä¾¿å’Œæ•°æ®ä¼ è¾“æœ€å¤§åŒ–ï¼Œæ§½çš„æ•°é‡åªèƒ½æœ‰ 2^14ä¸ªã€‚</p><ol><li>å¦‚æœæ§½ä½æ•°é‡ä¸º65535ä¸ªï¼Œé‚£ä¹ˆå‘é€å¿ƒè·³ä¿¡æ¯çš„æ¶ˆæ¯å¤´å°†è¾¾åˆ° 8kï¼Œå‘é€çš„å¿ƒè·³åŒ…è¿‡äºåºå¤§ã€‚åœ¨æ¶ˆæ¯å¤´ä¸­æœ€å ç©ºé—´çš„æ˜¯ myslots[CLUSTER_SLOTS/8]ã€‚å½“æ§½ä½ä¸º65536æ—¶ï¼Œè¿™å—çš„å¤§å°æ˜¯ ï¼š</li></ol><p><code>65536 Ã· 8 Ã· 1024 = 8Kb</code></p><p>æ¯ç§’ä¸­redisèŠ‚ç‚¹éœ€è¦å‘é€ä¸€å®šæ•°é‡çš„pingæ¶ˆæ¯ä½œä¸ºå¿ƒè·³ï¼Œå¦‚æœæ§½ä½ä¸º65536ï¼Œé‚£ä¹ˆè¿™ä¸ªpingæ¶ˆæ¯å¤´å°±ä¼šå¤ªå¤§æµªè´¹å¸¦å®½ã€‚</p><ol start="2"><li><p>redisé›†ç¾¤çš„ä¸»èŠ‚ç‚¹æ•°é‡åŸºæœ¬ä¸å¯èƒ½è¶…è¿‡1000ä¸ªã€‚é›†ç¾¤èŠ‚ç‚¹è¶Šå¤šï¼Œå¿ƒè·³åŒ…çš„æ¶ˆæ¯ä½“å†…æºå¸¦çš„æ•°æ®è¶Šå¤šã€‚å¦‚æœèŠ‚ç‚¹è¶…è¿‡1000ä¸ªï¼Œä¹Ÿä¼šå¯¼è‡´ç½‘ç»œæ‹¥å µã€‚å› æ­¤redisä½œè€…ä¸å»ºè®®redis clusterèŠ‚ç‚¹è¶…è¿‡1000ä¸ªã€‚å¯¹äºèŠ‚ç‚¹æ•°åœ¨1000ä»¥å†…çš„redis clusteré›†ç¾¤ï¼Œ16384ä¸ªæ§½ä½è¶³å¤Ÿäº†ï¼Œæ²¡æœ‰å¿…è¦æ‰©å±•åˆ°65536ä¸ªã€‚</p></li><li></li><li><p>æ§½ä½è¶Šå°ï¼ŒèŠ‚ç‚¹å°‘çš„æƒ…å†µä¸‹å‹ç¼©æ¯”è¶Šé«˜ï¼Œå®¹æ˜“ä¼ è¾“ã€‚Redisä¸»èŠ‚ç‚¹çš„é…ç½®ä¿¡æ¯ä¸­å®ƒé”è´Ÿè´£çš„å“ˆå¸Œæ§½æ˜¯é€šè¿‡ä¸€å¼ bitmapçš„å½¢å¼æ¥ä¿å­˜çš„ï¼Œåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šå¯¹bitmapè¿›è¡Œå‹ç¼©ï¼Œä½†æ˜¯å¦‚æœbitmapçš„å¡«å……ç‡ slots / Nï¼ˆNä¸ºèŠ‚ç‚¹æ•°ï¼‰å¾ˆé«˜çš„è¯ï¼Œbitmapçš„å‹ç¼©ç‡å°±å¾ˆä½ã€‚å¦‚æœèŠ‚ç‚¹æ•°å¾ˆå°‘ï¼Œè€Œå“ˆå¸Œæ§½æ•°å¾ˆå¤šçš„è¯ï¼Œbitmapçš„å‹ç¼©ç‡å°±å¾ˆä½ã€‚</p><p>åŸæ–‡ï¼š<br> æ­£å¸¸çš„å¿ƒè·³æ•°æ®åŒ…å¸¦æœ‰èŠ‚ç‚¹çš„å®Œæ•´é…ç½®ï¼Œä½¿å¾—å¯ä»¥ç”¨å¹‚ç­‰æ–¹å¼ç”¨æ—§çš„èŠ‚ç‚¹æ›¿æ¢æ—§èŠ‚ç‚¹ï¼Œä»¥ä¾¿æ›´æ–°æ—§çš„é…ç½®ã€‚è¿™æ„å‘³ç€å®ƒä»¬åŒ…å«åŸå§‹èŠ‚ç‚¹çš„æ’æ§½é…ç½®ï¼Œè¯¥èŠ‚ç‚¹ä½¿ç”¨ 2k çš„ç©ºé—´å’Œ 16k çš„æ’æ§½ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ 8k çš„ç©ºé—´ï¼ˆä½¿ç”¨65kçš„æ’æ§½ï¼‰ã€‚<br> åŒæ—¶ï¼Œå› ä¸ºå…¶ä»–è®¾è®¡æŠ˜è¡·ï¼ŒRedisé›†ç¾¤çš„ä¸»èŠ‚ç‚¹ä¸å¤ªå¯èƒ½æ‰©å±•åˆ°1000ä¸ªä»¥ä¸Š</p></li></ol><p>Redisé›†ç¾¤ä¸­å†…ç½®äº†16384ä¸ªå“ˆå¸Œæ§½ï¼Œredisä¼šæ ¹æ®èŠ‚ç‚¹æ•°é‡å¤§è‡´å‡ç­‰çš„å°†å“ˆå¸Œæ§½æ˜ å°„åˆ°ä¸åŒçš„èŠ‚ç‚¹ã€‚å½“éœ€è¦åœ¨Redisé›†ç¾¤ä¸­æ”¾ç½®ä¸€ä¸ªKey-Valueæ—¶ï¼Œrediså…ˆå¯¹keyä½¿ç”¨ CRC16 ç®—æ³•ç®—å‡ºä¸€ä¸ªç»“æœï¼Œç„¶åæŠŠç»“æœå¯¹ 16384 å–ä½™ï¼Œè¿™æ ·æ¯ä¸ªkeyéƒ½ä¼šå¯¹åº”ä¸€ä¸ªç¼–å·åœ¨0-16383ä¹‹é—´çš„å“ˆå¸Œæ§½ï¼Œä¹Ÿå°±æ˜¯æ˜ å°„åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šã€‚</p><figure><img src="https://lhplanet-1316168555.cos.ap-beijing.myqcloud.com/obsidian/20231024112053.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>@Test<br> public void test() {<br> // import io.lettuce.core.cluster.SlotHash;<br> System.out.println(SlotHash.getSlot(&#39;A&#39;)); // è®¡ç®—ç»“æœ6373ï¼Œå­˜å…¥ä¸Šå›¾çš„Node2<br> System.out.println(SlotHash.getSlot(&#39;B&#39;)); // è®¡ç®—ç»“æœ10374ï¼Œå­˜å…¥ä¸Šå›¾çš„Node2<br> System.out.println(SlotHash.getSlot(&#39;C&#39;)); // è®¡ç®—ç»“æœ14503ï¼Œå­˜å…¥ä¸Šå›¾çš„Node3<br> System.out.println(SlotHash.getSlot(&#39;Hello&#39;)); // è®¡ç®—ç»“æœ866ï¼Œå­˜å…¥ä¸Šå›¾çš„Node1<br> }</p><h2 id="_3ä¸»3ä»redisé›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_3ä¸»3ä»redisé›†ç¾¤" aria-hidden="true">#</a> 3ä¸»3ä»Redisé›†ç¾¤</h2><h3 id="æ­å»º" tabindex="-1"><a class="header-anchor" href="#æ­å»º" aria-hidden="true">#</a> æ­å»º</h3><p>ä½¿ç”¨dockeræ­å»º3ä¸»3ä»çš„Redisé›†ç¾¤ï¼Œæ¯å°ä¸»æœºéƒ½å¯¹åº”ä¸€å°ä»æœºã€‚<br> å¯åŠ¨6å°rediså®¹å™¨</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code># å¯åŠ¨ç¬¬1å°èŠ‚ç‚¹
# --net host ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£ï¼Œé»˜è®¤
# --cluster-enabled yes å¼€å¯redisé›†ç¾¤
# --appendonly yes å¼€å¯redisæŒä¹…åŒ–
# --port 6381 é…ç½®redisç«¯å£å·
docker run -d --name redis-node-1 --net host --privileged=true -v /app/redis-cluster/share/redis-node-1:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6381

# å¯åŠ¨ç¬¬2å°èŠ‚ç‚¹
docker run -d --name redis-node-2 --net host --privileged=true -v /app/redis-cluster/share/redis-node-2:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6382

# å¯åŠ¨ç¬¬3å°èŠ‚ç‚¹
docker run -d --name redis-node-3 --net host --privileged=true -v /app/redis-cluster/share/redis-node-3:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6383

# å¯åŠ¨ç¬¬4å°èŠ‚ç‚¹
docker run -d --name redis-node-4 --net host --privileged=true -v /app/redis-cluster/share/redis-node-4:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6384

# å¯åŠ¨ç¬¬5å°èŠ‚ç‚¹
docker run -d --name redis-node-5 --net host --privileged=true -v /app/redis-cluster/share/redis-node-5:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6385

# å¯åŠ¨ç¬¬6å°èŠ‚ç‚¹
docker run -d --name redis-node-6 --net host --privileged=true -v /app/redis-cluster/share/redis-node-6:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6386
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„å»ºä¸»ä»å…³ç³»ï¼š</p><ol><li>è¿›å…¥èŠ‚ç‚¹1ï¼ˆæˆ–å…¶ä¸­ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰:</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>docker exec -it redis-node-1 /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>æ„å»ºä¸»ä»å…³ç³»ï¼š</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code># å®¿ä¸»æœºIP:ç«¯å£
redis-cli --cluster create 192.168.xxx.xxx:6381 192.168.xxx.xxx:6382 192.168.xxx.xxx:6383 192.168.xxx.xxx:6384 192.168.xxx.xxx:6385 192.168.xxx.xxx:6386 --cluster-replicas 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><p>rediså°è¯•è‡ªåŠ¨è¿›è¡Œä¸»ä»èŠ‚ç‚¹åˆ†é…</p></li><li><p>å› ä¸ºæˆ‘ä»¬çš„dockerå®¹å™¨IPç›¸åŒï¼Œæ‰€ä»¥ä¼šå‡ºç°è­¦å‘Šï¼Œå¯ä»¥ç›´æ¥å¿½ç•¥è¯¥è­¦å‘Š</p></li></ol><p><code>[WARNING] Some slaves are in the same host as their master</code></p><ol start="5"><li>redisè‡ªåŠ¨åˆ†é…ç»“æœå®Œæˆåï¼Œéœ€è¦è¾“å…¥ Yes ç¡®è®¤é…ç½®ä¿¡æ¯ï¼š</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>M: f451eb48bbc0a7c31c7da022ffe80cc1696e0f37 192.168.xxx.xxx:6381
   slots:[0-5460] (5461 slots) master
M: 05984211b8c38222a73abeff1d4e459c0fe1efbc 192.168.xxx.xxx:6382
   slots:[5461-10922] (5462 slots) master
M: 1fc935c12b1d34a7df50aed643c195eb29bb3435 192.168.xxx.xxx:6383
   slots:[10923-16383] (5461 slots) master
S: f8d0de47114bf33438747acd713cce4e412ae721 192.168.xxx.xxx:6384
   replicates 1fc935c12b1d34a7df50aed643c195eb29bb3435
S: de0b393c17e452d856f6de2b348e9ca4e5aa4002 192.168.xxx.xxx:6385
   replicates f451eb48bbc0a7c31c7da022ffe80cc1696e0f37
S: 0c0767e13a09ee48541738d4163592cd9842c143 192.168.xxx.xxx:6386
   replicates 05984211b8c38222a73abeff1d4e459c0fe1efbc
Can I set the above configuration? (type &#39;yes&#39; to accept):
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>è¾“å…¥Yesç¡®è®¤åï¼Œredisä¼šå‘å…¶ä»–èŠ‚ç‚¹å‘é€ä¿¡æ¯åŠ å…¥é›†ç¾¤ï¼Œå¹¶åˆ†é…å“ˆå¸Œæ§½ï¼š</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>&gt;&gt;&gt; Nodes configuration updated
&gt;&gt;&gt; Assign a different config epoch to each node
&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster
Waiting for the cluster to join
.....
&gt;&gt;&gt; Performing Cluster Check (using node 192.168.xxx.xxx:6381)
M: f451eb48bbc0a7c31c7da022ffe80cc1696e0f37 192.168.xxx.xxx:6381
   slots:[0-5460] (5461 slots) master
   1 additional replica(s)
M: 1fc935c12b1d34a7df50aed643c195eb29bb3435 192.168.xxx.xxx:6383
   slots:[10923-16383] (5461 slots) master
   1 additional replica(s)
M: 05984211b8c38222a73abeff1d4e459c0fe1efbc 192.168.xxx.xxx:6382
   slots:[5461-10922] (5462 slots) master
   1 additional replica(s)
S: 0c0767e13a09ee48541738d4163592cd9842c143 192.168.xxx.xxx:6386
   slots: (0 slots) slave
   replicates 05984211b8c38222a73abeff1d4e459c0fe1efbc
S: f8d0de47114bf33438747acd713cce4e412ae721 192.168.xxx.xxx:6384
   slots: (0 slots) slave
   replicates 1fc935c12b1d34a7df50aed643c195eb29bb3435
S: de0b393c17e452d856f6de2b348e9ca4e5aa4002 192.168.xxx.xxx:6385
   slots: (0 slots) slave
   replicates f451eb48bbc0a7c31c7da022ffe80cc1696e0f37
[OK] All nodes agree about slots configuration.
&gt;&gt;&gt; Check for open slots...
&gt;&gt;&gt; Check slots coverage...
[OK] All 16384 slots covered.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼š</p><ol><li>è¿›å…¥å®¹å™¨èŠ‚ç‚¹1ï¼ˆæˆ–é›†ç¾¤ä¸­å…¶ä»–èŠ‚ç‚¹ï¼‰ï¼š</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>docker exec -it redis-node-1 /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>ä½¿ç”¨redis-cliè¿æ¥åˆ°6381èŠ‚ç‚¹ï¼š</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli -p 6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>ä½¿ç”¨redisçš„ç›¸å…³å‘½ä»¤æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼š</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>cluster info
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼Œåˆ†é…çš„å“ˆå¸Œæ§½æ•°é‡ cluster_slots_assignedä¸º16384ï¼Œé›†ç¾¤èŠ‚ç‚¹æ•°é‡cluster_known_nodesä¸º6</p><ol start="4"><li>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>cluster nodes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="redisé›†ç¾¤è¯»å†™å‡ºé”™" tabindex="-1"><a class="header-anchor" href="#redisé›†ç¾¤è¯»å†™å‡ºé”™" aria-hidden="true">#</a> Redisé›†ç¾¤è¯»å†™å‡ºé”™</h3><p>å½“ä½¿ç”¨ redis-cliè¿æ¥redisé›†ç¾¤æ—¶ï¼Œéœ€è¦æ·»åŠ  -cå‚æ•°ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°è¯»å†™å‡ºé”™ã€‚</p><p>ç¤ºä¾‹ï¼š</p><ol><li>è¿›å…¥å®¹å™¨èŠ‚ç‚¹1</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>docker exec -it redis-node-1 /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>ä½¿ç”¨redis-cliè¿æ¥ï¼Œä¸åŠ -cå‚æ•°æ—¶</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli -p 6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>æ­¤æ—¶å‘redisä¸­æ·»åŠ é”®å€¼å¯¹ï¼Œå¯èƒ½ä¼šæˆåŠŸï¼Œä¹Ÿå¯èƒ½ä¼šå¤±è´¥</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>set k1 v1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŠ¥é”™ï¼šk1ç»è¿‡è®¡ç®—å¾—åˆ°çš„å“ˆå¸Œæ§½ä¸º12706ï¼Œä½†æ˜¯å½“å‰è¿æ¥çš„redis-serverä¸º6381ï¼ˆå³èŠ‚ç‚¹1ï¼‰ï¼Œå®ƒçš„å“ˆå¸Œæ§½ä¸ºï¼š[0,5460]ï¼ˆåœ¨åˆ›å»ºæ„å»ºä¸»ä»å…³ç³»æ—¶redisæœ‰æç¤ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡ cluster nodesæŸ¥çœ‹ï¼‰ï¼Œæ‰€ä»¥ä¼šå› ä¸ºå­˜ä¸è¿›å»è€ŒæŠ¥é”™ã€‚<br> æ‰§è¡Œ set k2 v2å¯ä»¥æˆåŠŸï¼Œå› ä¸ºk2è®¡ç®—å‡ºçš„å“ˆå¸Œæ§½åœ¨[0-5460]åŒºé—´ä¸­ã€‚</p><ol start="4"><li>ä½¿ç”¨-cå‚æ•°çš„redis-cliå‘½ä»¤è¿æ¥å³å¯</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli -p 6381 -c
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>æ­¤æ—¶å¯ä»¥æ­£å¸¸çš„æ’å…¥æ‰€æœ‰æ•°æ®</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>set k1 v1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¼šæœ‰æç¤ºä¿¡æ¯ï¼Œå“ˆå¸Œæ§½ä¸º12706ï¼Œé‡å®šå‘åˆ°6383ï¼ˆå³èŠ‚ç‚¹3ï¼Œå“ˆå¸Œæ§½[10923, 16383]ï¼‰ï¼š</p><h3 id="é›†ç¾¤ä¿¡æ¯æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#é›†ç¾¤ä¿¡æ¯æ£€æŸ¥" aria-hidden="true">#</a> é›†ç¾¤ä¿¡æ¯æ£€æŸ¥</h3><p>æ£€æŸ¥æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯ï¼š</p><ol><li>è¿›å…¥å®¹å™¨èŠ‚ç‚¹1</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>docker exec -it redis-node-1 /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>è¿›è¡Œé›†ç¾¤ä¿¡æ¯æ£€æŸ¥</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code># è¾“å…¥ä»»æ„ä¸€å°ä¸»èŠ‚ç‚¹åœ°å€éƒ½å¯ä»¥è¿›è¡Œé›†ç¾¤æ£€æŸ¥
redis-cli --cluster check 192.168.xxx.xxx:6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿”å›çš„æ£€æŸ¥ç»“æœï¼š</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>å½“å‰é›†ç¾¤ä¸­å„ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„keyçš„æ•°é‡
192.168.xxx.xxx:6381 (f451eb48...) -&gt; 0 keys | 5461 slots | 1 slaves.
192.168.xxx.xxx:6383 (1fc935c1...) -&gt; 1 keys | 5461 slots | 1 slaves.
192.168.xxx.xxx:6382 (05984211...) -&gt; 0 keys | 5462 slots | 1 slaves.
[OK] 1 keys in 3 masters.  
0.00 keys per slot on average.

ä¸»ä»æœºå™¨ä¿¡æ¯
&gt;&gt;&gt; Performing Cluster Check (using node 192.168.xxx.xxx:6381)
M: f451eb48bbc0a7c31c7da022ffe80cc1696e0f37 192.168.xxx.xxx:6381
   slots:[0-5460] (5461 slots) master
   1 additional replica(s)
M: 1fc935c12b1d34a7df50aed643c195eb29bb3435 192.168.xxx.xxx:6383
   slots:[10923-16383] (5461 slots) master
   1 additional replica(s)
M: 05984211b8c38222a73abeff1d4e459c0fe1efbc 192.168.xxx.xxx:6382
   slots:[5461-10922] (5462 slots) master
   1 additional replica(s)
S: 0c0767e13a09ee48541738d4163592cd9842c143 192.168.xxx.xxx:6386
   slots: (0 slots) slave
   replicates 05984211b8c38222a73abeff1d4e459c0fe1efbc
S: f8d0de47114bf33438747acd713cce4e412ae721 192.168.xxx.xxx:6384
   slots: (0 slots) slave
   replicates 1fc935c12b1d34a7df50aed643c195eb29bb3435
S: de0b393c17e452d856f6de2b348e9ca4e5aa4002 192.168.xxx.xxx:6385
   slots: (0 slots) slave
   replicates f451eb48bbc0a7c31c7da022ffe80cc1696e0f37
[OK] All nodes agree about slots configuration.
&gt;&gt;&gt; Check for open slots...
&gt;&gt;&gt; Check slots coverage...
[OK] All 16384 slots covered.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸»ä»æ‰©å®¹ç¼©å®¹" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»æ‰©å®¹ç¼©å®¹" aria-hidden="true">#</a> ä¸»ä»æ‰©å®¹ç¼©å®¹</h2><h3 id="ä¸»ä»æ‰©å®¹" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»æ‰©å®¹" aria-hidden="true">#</a> ä¸»ä»æ‰©å®¹</h3><p>å‡å¦‚å› ä¸ºä¸šåŠ¡é‡æ¿€å¢ï¼Œéœ€è¦å‘å½“å‰3ä¸»3ä»çš„é›†ç¾¤ä¸­å†åŠ å…¥1ä¸»1ä»ä¸¤ä¸ªèŠ‚ç‚¹ã€‚</p><p>æ­¥éª¤ï¼š</p><ol><li>å¯åŠ¨2å°æ–°çš„å®¹å™¨èŠ‚ç‚¹</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code># å¯åŠ¨ç¬¬7å°èŠ‚ç‚¹
docker run -d --name redis-node-7 --net host --privileged=true -v /app/redis-cluster/share/redis-node-7:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6387

# å¯åŠ¨ç¬¬8å°èŠ‚ç‚¹
docker run -d --name redis-node-8 --net host --privileged=true -v /app/redis-cluster/share/redis-node-8:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6388
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>è¿›å…¥6387ï¼ˆèŠ‚ç‚¹7ï¼‰å®¹å™¨å†…éƒ¨</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>docker exec -it redis-node-7 /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>å°†6387ä½œä¸ºmasteråŠ å…¥é›†ç¾¤</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code># redis-cli --cluster add-node æœ¬èŠ‚ç‚¹åœ°å€ è¦åŠ å…¥çš„é›†ç¾¤ä¸­çš„å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹åœ°å€
redis-cli --cluster add-node 192.168.xxx.xxx:6387 192.168.xxx.xxx:6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>æ£€æŸ¥å½“å‰é›†ç¾¤çŠ¶æ€</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli --cluster check 192.168.xxx.xxx:6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯ä»¥å‘ç°ï¼Œ6371èŠ‚ç‚¹å·²ç»ä½œä¸ºmasteråŠ å…¥äº†é›†ç¾¤ï¼Œä½†æ˜¯è¯¥èŠ‚ç‚¹æ²¡æœ‰è¢«åˆ†é…æ§½ä½ã€‚</p><ol start="5"><li>é‡æ–°åˆ†é…é›†ç¾¤çš„æ§½ä½</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli --cluster reshard 192.168.xxx.xxx:6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>redisç»è¿‡æ§½ä½æ£€æŸ¥åï¼Œä¼šæç¤ºéœ€è¦åˆ†é…çš„æ§½ä½æ•°é‡ï¼š<br> ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç°åœ¨æ˜¯4å°masterï¼Œæˆ‘ä»¬æƒ³è¦ç»™node7åˆ†é…4096ä¸ªæ§½ä½ï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯4096ä¸ªæ§½ä½ã€‚<br> è¾“å…¥4096åï¼Œä¼šè®©è¾“å…¥è¦æ¥æ”¶è¿™äº›å“ˆå¸Œæ§½çš„èŠ‚ç‚¹IDï¼Œå¡«å…¥node7çš„èŠ‚ç‚¹IDå³å¯ã€‚ï¼ˆå°±æ˜¯èŠ‚ç‚¹ä¿¡æ¯ä¸­å¾ˆé•¿çš„ä¸€ä¸²åå…­è¿›åˆ¶ä¸²ï¼‰ã€‚<br> ç„¶åä¼šæç¤ºï¼Œè¯¢é—®è¦ä»å“ªäº›èŠ‚ç‚¹ä¸­æ‹¨å‡ºä¸€éƒ¨åˆ†æ§½ä½å‡‘è¶³4096ä¸ªåˆ†ç»™Node7ã€‚ä¸€èˆ¬é€‰æ‹© allï¼Œå³å°†ä¹‹å‰çš„3ä¸ªä¸»èŠ‚ç‚¹çš„æ§½ä½éƒ½å‡ä¸€äº›ç»™Node7ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ¯ä¸ªèŠ‚ç‚¹çš„æ§½ä½æ•°ç›¸ç­‰å‡è¡¡ã€‚<br> è¾“å…¥allä¹‹åï¼Œredisä¼šåˆ—å‡ºä¸€ä¸ªè®¡åˆ’ï¼Œå†…å®¹æ˜¯è‡ªåŠ¨ä»å‰é¢çš„3å°masterä¸­æ‹¨å‡ºä¸€éƒ¨åˆ†æ§½ä½åˆ†ç»™Node7çš„æ§½ä½ï¼Œéœ€è¦ç¡®è®¤ä¸€ä¸‹åˆ†é…çš„è®¡åˆ’ã€‚<br> è¾“å…¥yesç¡®è®¤åï¼Œredisä¾¿ä¼šè‡ªåŠ¨é‡æ–°æ´—ç‰Œï¼Œç»™Node7åˆ†é…æ§½ä½ã€‚</p><p>é‡æ–°åˆ†é…å®Œæˆåï¼Œå¯ä»¥è¿›è¡Œé›†ç¾¤ä¿¡æ¯æ£€æŸ¥ï¼ŒæŸ¥çœ‹åˆ†é…ç»“æœï¼š</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli --cluster check 192.168.xxx.xxx:6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯ä»¥å‘ç°é‡æ–°æ´—ç‰Œåçš„æ§½ä½åˆ†é…ä¸ºï¼š</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>èŠ‚ç‚¹1ï¼š[1365-5460]ï¼ˆä¾›4096ä¸ªæ§½ä½ï¼‰ï¼Œï¼Œï¼Œåˆ†é…å‰ä¸º[0-5460]ï¼ˆå…±5461ä¸ªæ§½ä½ï¼‰
èŠ‚ç‚¹2ï¼š[6827-10922]ï¼ˆå…±4096ä¸ªæ§½ä½ï¼‰ï¼Œï¼Œï¼Œåˆ†é…å‰ä¸º[5461-10922]ï¼ˆå…±5461ä¸ªæ§½ä½ï¼‰
èŠ‚ç‚¹3ï¼š[12288-16383]ï¼ˆå…±4096ä¸ªæ§½ä½ï¼‰ï¼Œï¼Œï¼Œåˆ†é…å‰ä¸º[10923-16383]ï¼ˆå…±5462ä¸ªæ§½ä½ï¼‰

èŠ‚ç‚¹7ï¼š[0-1364],[5461-6826],[10923-12287]ï¼ˆå…±4096ä¸ªæ§½ä½ï¼‰ï¼Œä»æ¯ä¸ªèŠ‚ç‚¹ä¸­åŒ€å‡ºæ¥äº†ä¸€éƒ¨åˆ†ç»™äº†èŠ‚ç‚¹7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºå¯èƒ½æœ‰äº›æ§½ä½ä¸­å·²ç»å­˜å‚¨äº†keyï¼Œå®Œå…¨çš„é‡æ–°æ´—ç‰Œé‡æ–°åˆ†é…çš„æˆæœ¬è¿‡é«˜ï¼Œæ‰€ä»¥redisé€‰æ‹©ä»å‰3ä¸ªèŠ‚ç‚¹ä¸­åŒ€å‡ºæ¥ä¸€éƒ¨åˆ†ç»™èŠ‚ç‚¹7</p><p>ä¸ºä¸»èŠ‚ç‚¹6387åˆ†é…ä»èŠ‚ç‚¹6388ï¼š</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli --cluster add-node 192.168.xxx.xxx:6388 192.168.xxx.xxx:6381 --cluster-slave --cluster-master-id node7èŠ‚ç‚¹çš„åå…­è¿›åˆ¶ç¼–å·å­—ç¬¦ä¸²
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>redisä¾¿ä¼šå‘6388å‘é€æ¶ˆæ¯ï¼Œä½¿å…¶åŠ å…¥é›†ç¾¤å¹¶æˆä¸º6387çš„ä»èŠ‚ç‚¹ã€‚</p><p>æ£€æŸ¥é›†ç¾¤å½“å‰çŠ¶æ€</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli --cluster check 192.168.xxx.xxx:6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ä¸»ä»ç¼©å®¹" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»ç¼©å®¹" aria-hidden="true">#</a> ä¸»ä»ç¼©å®¹</h3><p>å‡å¦‚ä¸šåŠ¡é«˜å³°æœŸè¿‡å»ï¼Œéœ€è¦å°†4ä¸»4ä»é‡æ–°ç¼©å®¹åˆ°3ä¸»3ä»ã€‚å³ä»é›†ç¾¤ä¸­ç§»é™¤node8å’Œnode7.</p><p>é¦–å…ˆåˆ é™¤ä»èŠ‚ç‚¹6388ï¼š</p><ol><li>è¿›å…¥å®¹å™¨èŠ‚ç‚¹1</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>docker exec -it redis-node-1 /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>æ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼Œè·å–6388çš„èŠ‚ç‚¹ç¼–å·</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli --cluster check 192.168.xxx.xxx:6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>å°†6388ä»é›†ç¾¤ä¸­ç§»é™¤</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli --cluster del-node 192.168.xxx.xxx:6388 6388èŠ‚ç‚¹ç¼–å·
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯¹node7é‡æ–°åˆ†é…å“ˆå¸Œæ§½ï¼š</p><ol><li>å¯¹é›†ç¾¤é‡æ–°åˆ†é…å“ˆå¸Œæ§½</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli --cluster reshard 192.168.xxx.xxx:6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>redisç»è¿‡æ§½ä½æ£€æŸ¥åï¼Œä¼šæç¤ºéœ€è¦åˆ†é…çš„æ§½ä½æ•°é‡ï¼š</li></ol><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>How many slots do you want to move (from 1 to 16384)?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœæˆ‘ä»¬æƒ³ç›´æ¥æŠŠnode7çš„4096ä¸ªå“ˆå¸Œæ§½å…¨éƒ¨åˆ†ç»™æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥4096ã€‚<br> è¾“å…¥4096åï¼Œä¼šè®©è¾“å…¥è¦æ¥æ”¶è¿™äº›å“ˆå¸Œæ§½çš„èŠ‚ç‚¹IDã€‚å‡å¦‚æˆ‘ä»¬æƒ³æŠŠè¿™4096ä¸ªæ§½éƒ½åˆ†ç»™Node1ï¼Œç›´æ¥è¾“å…¥node1èŠ‚ç‚¹çš„ç¼–å·å³å¯ã€‚<br> ç„¶åä¼šæç¤ºï¼Œè¯¢é—®è¦ä»å“ªäº›èŠ‚ç‚¹ä¸­æ‹¨å‡ºä¸€éƒ¨åˆ†æ§½ä½å‡‘è¶³4096ä¸ªåˆ†ç»™Node1ã€‚è¿™é‡Œæˆ‘ä»¬è¾“å…¥node7çš„èŠ‚ç‚¹ç¼–å·ï¼Œå›è½¦åè¾“å…¥doneã€‚</p><p>node7ä¸Šé¢æ²¡æœ‰äº†å“ˆå¸Œæ§½ï¼Œæ­¤æ—¶ä¾¿å¯ä»¥å°†node7ä»é›†ç¾¤ä¸­ç§»é™¤ã€‚ï¼ˆå¦‚æœnode7ä¸Šé¢æœ‰å“ˆå¸Œæ§½ï¼Œç›´æ¥ä»é›†ç¾¤ä¸­ç§»é™¤ä¼šæŠ¥é”™ï¼‰</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>redis-cli --cluster del-node 192.168.xxx.xxx:6387 node7èŠ‚ç‚¹ç¼–å·
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/lhplanet/lhplanet.github.io/edit/main/src/07_server/01_docker/10_Dockerå®‰è£…Redis.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 752869332@qq.com">lihaopeng</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="vp-link nav-link prev" href="/07_server/01_docker/09_Docker%E5%AE%89%E8%A3%85MySQL.html"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->09_Dockerå®‰è£…MySQL</div></a><a class="vp-link nav-link next" href="/07_server/01_docker/21_%E5%88%9D%E8%AF%86Docker.html"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">21_åˆè¯†Docker<!----></div></a></nav><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">é›¶å·æ˜Ÿçƒå›¾ä¹¦é¦†</div><div class="vp-copyright">Copyright Â© 2023 LHP</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-9a860c23.js" defer></script>
  </body>
</html>
